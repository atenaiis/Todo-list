(()=>{"use strict";const t=document.getElementById("formProject"),e=document.getElementById("formToDo"),i=document.getElementById("span-select-project"),n=document.createElement("select"),o=document.getElementById("content"),d=document.createElement("div");function s(t){const e=document.createElement("option");e.innerText=t.title,e.setAttribute("value",t.title),n.appendChild(e)}function r(t,e){const i=document.createElement("div");i.setAttribute("class","board"),i.innerHTML=`<h2>${t.title}</h2>`,function(t,e,i){const n=document.createElement("div");n.setAttribute("class","todos-grid"),t.forEach(((t,e)=>((t,e,i,n)=>{const o=document.createElement("div");o.setAttribute("class","todo-item"),o.style.backgroundColor=t.color,o.innerHTML=`<h3>${t.title} </h3>`;const d=document.createElement("div");d.innerHTML=`<p> Date:  ${t.date} </p><p> Priority: ${t.priority} </p>`,o.appendChild(d);const s=document.createElement("div");s.setAttribute("class","todo-buttons"),s.innerHTML=`<button> <span class="hover-under" id="btnedit-${n}-${e}"> Edit/Details â†’</span></button>\n           <button> <img class="trash"  id="remove-${n}-${e}" src="../src/images/trash.svg" height="18px"> </button> </p>`,o.appendChild(s),i.appendChild(o)})(t,e,n,i))),e.appendChild(n)}(t.todos,i,e),d.appendChild(i)}const l=()=>{e.classList.contains("display-none")||e.classList.add("display-none"),t.classList.toggle("display-none")},c=o=>{t.classList.contains("display-none")||t.classList.add("display-none"),(t=>{n.setAttribute("id","project"),n.setAttribute("name","project"),t.forEach(s),i.appendChild(n)})(o),e.classList.toggle("display-none")},a=t=>{t.forEach(r),o.appendChild(d)},p=(t,e,i)=>{const n=t[e].todos[i];document.getElementById("title-edit").setAttribute("value",n.title),document.getElementById("current-date").innerText=`${n.date}`,document.getElementById("edit-description").value=n.description,document.getElementById("current-priority").innerText=`${n.priority}`,document.getElementById("btnEdit").innerHTML=`<p id=change-${e}-${i}>Save Changes</p>`,document.getElementById("edit-form").classList.toggle("display-none")},m=()=>{document.getElementById("edit-form").classList.toggle("display-none")},u=t=>{document.getElementById(t).classList.remove("display-none")},g=()=>document.getElementById("title").value,y=()=>({title:document.getElementById("title-todo").value,date:document.getElementById("date").value,description:document.getElementById("description").value,priority:document.getElementById("priority").value,project:document.getElementById("project").value}),E=()=>({title:document.getElementById("title-edit").value,date:document.getElementById("edit-date").value,description:document.getElementById("edit-description").value,priority:document.getElementById("edit-priority").value}),v=t=>{localStorage.setItem("projects",JSON.stringify(t))};let f=[];const h=()=>{v(f),document.location.reload()},I=t=>{let e="";return"Low"===t&&(e="#82d37a"),"Medium"===t&&(e="#f8e953"),"High"===t&&(e="#ee9193"),e};let B=[];f=localStorage.getItem("projects")?JSON.parse(localStorage.getItem("projects")):[{title:"Default",todos:[]}],B=f,a(B),document.addEventListener("click",(t=>{if(t.target&&"submit-project"===t.target.id){const t=g();((t,e)=>{let i="";if(e){const n=((t,e=[])=>({title:t,todos:e}))(e);t.push(n),v(t),h(),i=n}else u("project-warning"),i="Fail"})(B,t)}else if(t.target&&"new-project"===t.target.id)l();else if(t.target&&"new-todo"===t.target.id)c(B);else if(t.target&&"submit-todo"===t.target.id){const t=y();((t,e)=>{let i="";if(e.title&&e.date&&e.description&&e.priority){const o={title:e.title,date:e.date,description:e.description,priority:n=e.priority,project:e.project,color:I(n)};((t,e)=>{const i=t.findIndex((t=>t.title===e.project));t[i].todos.push(e),v(t)})(t,o),h(),i=o}else u("todo-warning"),i="Fail";var n})(B,t)}else if(t.target&&t.target.id.includes("remove-")){const e=t.target.id.split("-");B=((t,e,i)=>{const n=[...t];return n[e].todos.splice(i,1),v(n),n})(B,e[1],e[2]),h()}else if(t.target&&"close"===t.target.id||t.target&&"edit-form"===t.target.id)m();else if(t.target&&t.target.id.includes("btnedit")){const e=t.target.id.split("-");p(B,e[1],e[2])}else if(t.target&&t.target.id.includes("change")){const e=t.target.id.split("-"),i=E();B=((t,e,i,n)=>{const o=[...t],d=o[e].todos[i],{title:s}=n,{date:r}=n,{description:l}=n,{priority:c}=n;return o[e].todos[i]=((t,e,i,n,o)=>{const d=t;if(e&&(d.title=e),i&&(d.date=i),d.description=n,"nil"!==o){d.priority=o;const t=I(o);d.color=t}return d})(d,s,r,l,c),v(o),o})(B,e[1],e[2],i),h()}}))})();